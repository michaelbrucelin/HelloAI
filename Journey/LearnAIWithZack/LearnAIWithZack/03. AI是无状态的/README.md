# README

AI是无状态的，类似于http，所以为了让AI有状态，就像http借助cookie等技术一样，AI可以借助“记忆层”来实现让AI有状态。

最简单的方式就是，每次向AI输入的时候，都将历史输入一起发给AI（AIStateTester02），这样的确可以解决AI无状态的问题，但是会有下面两个新的问题：

1. 浪费token
2. AI幻觉

第一个问题还好说，假如AI是本地部署的，不存在付费这个问题，但是每次都把所有历史信息发给AI，会使AI本次生成的结果不准确，这个问题就致命了。

例如用户给AI输入了这些信息：

- 我叫林对木
- 我1988年出生
- 我来自辽宁大连
- 我爱吃鱼
- 马王堆好好玩啊
- 天安门好漂亮啊
- 004要出来了，好兴奋啊
- ... ...

现在用户想要问AI，**我几岁了？**，其实只要把**我叫林对木**这一条历史信息一起发给AI就可以了，最多把其他几条个人描述的一起发给AI，把所有的历史信息一起发给AI显然是不合适的，**记忆层**就是解决这个问题的，记忆层可以快速的从历史信息中找出与此次消息**相关**的消息并返回，具体原理这里先不描述。

AIStateTester03演示了使用杨中科老师的[MemNet](https://github.com/yangzhongke/MemNet)项目实现记忆层，做一个演示。

```powershell
dotnet add package MemNet  # Install-Package MemNet
```

记忆层的效果如下，可以看出每次给AI输入，都会中历史消息中找出“**相关**”的消息（Memory）一起发给AI。

```txt
Hello, World!

You:我叫林对木
Memory:

AI：你好，林对木！很高兴认识你。请问有什么我可以帮你的吗？如果你想聊聊任何话题，随时告诉我！


You:我1988年出生的
Memory:

AI：你现在已经38岁（2026年）。有什么我可以帮你的吗？如果你在想了解与出生年份相关的信息（比如八字、星座、运势等），请告诉我，我可以为你提供进一步的解读。


You:我爱吃中餐
Memory:

AI：听起来很不错！你最喜欢哪种中餐菜系呢？是川菜、粤菜、湘菜还是别的？如果想要点推荐，我也可以给你几道特色菜来尝尝。


You:我住在哪里？
Memory:

AI：对不起，我不知道你住在哪里。


You:我几岁了？
Memory:
:User was born in 1988.
AI：你出生于 1988 年。
截至 2026 年 2 月 22 日，你已经 **38 岁**（如果你的生日在 2 月 22 日之前已经过，那么 38 岁；如果生日在之后还没到，则仍是 37 岁）。


You:我姓什么？
Memory:
:The user’s name is 林对木.
AI：你的姓是 **林**。


You:给我推荐一些美食
Memory:
:User loves eating Chinese food.
AI：当然可以！既然你喜欢吃中国菜，下面给你推荐一些各大菜系中的经典美食，按口味和特色划分，帮你挑选或自己动手烹饪都很合适：

| 菜系 | 代表菜 | 口味特色 | 推荐理由 |
|---|---|---|---|
| **川菜** | 口味：麻辣、重口味<br>菜品：宫保鸡丁、麻婆豆腐、鱼香肉丝、回锅肉、宫保虾球 | 以鲜香、麻辣、微酥而著称，适合爱吃刺激味道的朋友 | 经典川菜中，麻婆豆腐和宫保鸡丁几乎是“入门”必学的菜品。 |
| **湘菜** | 口味：辣、咸、鲜、香<br>菜品：剁椒鱼头、口味虾、腊肉蒸蛋、湘西土匪板 | 以辣与腌制结合的口味突出，浓郁又不失层次 |  剁椒鱼头鲜而微辣，适合下饭。 |
| **鲁菜** | 口味：鲜、咸、甜、油、膳、咸<br>菜品：糖醋鲤鱼、扒鸡、鲍汁大排、烩八宝菜 | 以“重油重糖重酱”为主，口味比较浓 | 鲜 糖醋鲤鱼色泽诱人，甜中带酸，口感层次丰富。 |
| **粤菜** | 口味：清鲜、细嫩、少甜少咸<br>菜品：白灼虾、叉烧、蒸鱼、蛋挞、虾饺、烧鸭 | 以保持食材原味为主，轻爽口感 | 叉烧的香 甜酱料与蒸鱼的鲜嫩对比极佳。 |
| **淮扬菜** | 口味：鲜、淡、清、酥、甜、咸<br>菜品：松鼠桂鱼、狮子头、酱爆虾、扬州炒饭 | 以“鲜咸少油”闻名，色泽雅致 | 松鼠桂 鱼外酥里嫩，酱汁入口即化。 |
| **客家菜** | 口味：咸鲜、酱香、略甜<br>菜品：客家盐焗鸡、梅干菜扣肉、客家小炒、酿豆腐 | 注重酱料发酵的味道，兼顾家常与创新 |  盐焗鸡皮酥肉嫩，酱料浓郁可口。 |
| **东北菜** | 口味：重油、甜咸、酸辣<br>菜品：锅包肉、地三鮮、干菜炖粉条、酸菜炖粉条 | 以肉食为主，口味偏重 | 传统锅包肉外酥内 嫩，甜中带酸的酱料让人胃口大开。 |
| **江浙菜** | 口味：鲜、甜、酥、油重<br>菜品：清汤鲍鱼、南瓜糊、龙井虾仁、龙井鱼、汤圆 | 清淡且甜度适中，兼顾肉类与蔬菜 | 龙井 虾仁以细嫩虾仁和清香龙井茶酱结合，味道极佳。 |

### 小贴士
- **如果你在家做**：川味可以先调好豆瓣酱和花椒，湘味则可以准备辣椒酱或剁椒，粤味则强调酱油与清汤的比例，尽量用新鲜食材。
- **如果想去吃**：在大城市中，你几乎能在中餐馆找到以上菜系的代表性菜品，挑选口碑好的店铺，注意菜品的摆盘与配料比例。

希望这些推荐能帮你开启一次精彩的味蕾之旅！如果想知道如何在家做其中某道菜，随时告诉我哦。祝你吃得开心！


You:基于我目前的位置，给我推荐一些餐馆
Memory:
2026/2/22 8:32:21:User loves eating Chinese food and is requesting food recommendations.
AI：好的，为了帮您找到最合适的餐馆，我需要您告诉我目前所在的城市或具体地址（比如街道名称、附近的地标或邮编）。如果方便的话，直接说一下现在所在的区域，就能为您提供更精准的推荐。期待您的回复！


You:我住在中国辽宁省大连市红旗中路附近
Memory:
2026/2/22 8:32:53:User loves eating Chinese food and is requesting restaurant recommendations based on their current location.
AI：以下几家餐馆离你所在的红旗中路大约 200?–?800?米，距离很近，适合喜欢正宗中式美食的你。每家都有自己擅长的菜系与招牌菜，供你挑选：

| 排名 | 餐厅名称 | 类型 | 特色菜 | 地址 | 路程 | 电话 |
|------|-----------|------|--------|------|------|------|
| 1 | **大连海鲜酒楼** (Hǎi Xiān Jiǔ Lou) | 海鲜自助/正点海鲜 | 石斑鱼、海参、海胆拼盘 | 大连市中南路 25 号（红旗中路往南约 350?m） | 350?m | 0411?1234567 |
| 2 | **鲁华海鲜楼** | 海鲜火锅/海产 | 口味虾、蛤蜊蒸蛋、鲍鱼滑汤 | 大连市中山路 12 号（红旗中路东侧约 500?m） | 500?m | 0411?9876543 |
| 3 | **老城隍庙小吃** | 传统小吃/快餐 | 过桥米线、卤煮、酸菜粉丝汤 | 红旗中路 10 号（步行约 200?m） | 200?m | 0411?1122334 |
| 4 | **川香满天地** | 川菜 | 麻婆豆腐、宫保鸡丁、鱼香肉丝 | 友好街 18 号（红旗中路南侧约 650?m） | 650?m | 0411?4455667 |
| 5 | **大连正宗海味馆** | 传统海鲜+粤菜 | 砂锅鱼头、清蒸鲈鱼、鲍鱼粥 | 中华路 9 号（红旗中路西侧约 800?m） | 800?m | 0411?2222333 |

### 推荐理由

- **海鲜酒楼 / 鲁华海鲜楼**
  位于市中心，海鲜新鲜，价格适中，适合与朋友或家人聚餐。推荐尝试“石斑鱼”和“海参”拼盘，口感鲜美。

- **老城隍庙小吃**
  如果你想尝试当地传统小吃，咱们这家极佳。特别是过桥米线与卤煮，既有鲜味又有地方气息。

- **川香满天地**
  如果想吃川味刺激，宫保鸡丁与麻婆豆腐值得尝试。餐厅装修典雅，环境舒适。

- **大连正宗海味馆**
  这家以粤式海鲜为主，砂锅鱼头与清蒸鲈鱼在当地口碑极佳，适合比较正式的聚餐。

### 小贴士

- **预订／排队**：大连在周五、周六、法定假日往往人多，建议提前 10?15 分钟提前到店或通过手机点餐预约。
- **支付**：几乎所有餐馆都支持移动支付（微信/支付宝），但最好询问是否接受其它支付方式。
- **口味偏好**：若你不太喜欢辣，可在点菜时告知服务员把辣度调低或换成汤菜。

祝你在大连的美食之旅愉快，有任何其他需求（如素食、早午餐、单点等）随时告诉我！祝好。


You:quit
```
